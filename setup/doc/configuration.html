<html>
<head>
<title>Configuration</title>
<style>
table          { border-collapse: collapse;
                 border: 1px solid; 
		 margin-left: 2em;
		 margin-right: 2em
	       }	
td             { border: 1px solid; padding: 1em; }
th             { border: 1px solid; padding: 1em; }
</style>
</head>

<body>
<h1>How to Configure Mireka</h1>
		
<h3>Container: Resin Application Server</h3>
<p>Mireka is using the Resin application server for configuration and startup.
Therefore it is distibuted in a standard Java Web Application archive, although 
currently it has no web interface. In the unlikely event, that some additonal  
configuration of Resin is needed, other than what was already done during 
installation, you can find more information about Resin on its web site at
<a href="http://www.caucho.com/products/resin/">http://www.caucho.com/products/resin/</a>.
</p>

<h3>Mail services</h3>
<p>
Mireka configuration files are located in the <kbd>${mirekaHome}/conf/</kbd> 
directory.
</p>

<p>
<kbd>mireka.xml</kbd> is the primary configuration file of Mireka. 
It is imported by 
<kbd>resin-web.xml</kbd> in the Mireka web application archive during runtime. 
<kbd>mireka.xml</kbd> in turn imports most of the other configuration 
files. 
</p>

<p>
These configuration files will be read and processed by Resin. 
Essentially, they control what objects must be created in runtime. The name of a tag 
is a Java class name. An element assigns a value to a property of the object. 
It is also possible to specify another objest as a property value, either 
defining it inline, or referencing it by an EL expression.    
For more information on the syntax, see the Resin documentation.
</p>

<p>
For more information on the Mireka classes which are referenced in the 
configuration, see the <a href="javadoc/index.html">javadoc</a>.
</p>

<p>
The import structure of configuration files should be considered as an example. 
It is possible to include all data in <kbd>mireka.xml</kbd>. It is also possible 
to divide the configuration into more files than what is supplied by default.  
</p>

<table>

<tr><th>mireka.xml</th><td>Enables/disables SMTP, Submission and POP3 
services by importing or not importing their respective configuration files. 
It contains common elements used by more than one services. Some of these are 
default objects which are referred by other parts of the configuration, but it 
is also possible to define and use other instances of them. It also contains a 
very few, mostly static configuration related to Mireka as a whole. 
See the comments in the file for more information.
</td></tr>

<tr><th><a href="mx.html">mx</a></th><td>Configuration files related to the 
public SMTP  
service, which receives mails sent to the local domains by any server on the 
internet. The service, in turn, stores the mail in a POP3 mailbox, relays it in 
real time to a backend server behaving like a proxy, forwards it, etc.
</td></tr>

<tr><th><a href="submission.html">submission</a></th><td>Configuration files 
related to the Message Submission service, used by local users to send mails either to 
other local users, or to other domains on the internet. The service, in turn, stores the mail in a POP3 mailbox, relays it in 
real time to a backend server behaving like a proxy, forwards it, etc.
</td></tr>

<tr><th>pop/pop.xml</th><td>Configures the POP3 service itself and the POP3 
Importer. POP3 Importer is useful for migration. It retrieves each users' mails from another 
POP3 server after startup. To use it, it is necessary that the user names and
the passwords match on both system.
</td></tr>

<tr><th>domains.xml</th><td>List of local domain names. 
If the domain part of a recipient is not in this list, then the recipient will 
be rejected by the MX SMTP service.
</td></tr>

<tr><th><a href="global-users.html">global-users.xml</a></th>
<td>Authorized users of the Mail Submission, POP3 services, in addition they
are also valid wildcard recipients in the MX SMTP service. 
</td></tr>

<tr><th>alias.xml</th>
<td>
List of aliases. An alias maps one or more virtual recipients to a 
canonical recipient address. 
</td></tr>

<tr><th>forwards.xml</th>
<td>
Forward lists. Forward lists are used to redistribute incoming mail to multiple 
other addresses.
</td></tr>

<tr><th>lists.xml</th>
<td>
List of (very) simple mailing lists.
</td></tr>

<tr><th>others.xml</th>
<td>
Other local recipients not included in the alias.xml, forwards.xml etc. 
configuration files.
</td></tr>

</table>

<h3>Logging</h3>
<p>
<kbd>${mirekaHome}/conf/logback.xml</kbd> configures logging.
For more information, see the documentation of 
<a href="http://logback.qos.ch/">Logback</a> and the  
<a href="administration.html">Administration</a> section.
</p>

</body>
</html>