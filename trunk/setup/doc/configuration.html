<html>
<head>
<title>Configuration</title>
<style>
table          { border-collapse: collapse;
                 border: 1px solid; 
		 margin-left: 2em;
		 margin-right: 2em
	       }	
td             { border: 1px solid; padding: 1em; }
th             { border: 1px solid; padding: 1em; }
</style>
</head>

<body>
<h1>How to Configure Mireka</h1>
		
<h3>Container: Resin Application Server</h3>
<p>Mireka is using the Resin application server for configuration and startup.
Therefore it is distibuted in a standard Java Web Application archive, although 
currently it has no web interface. In the unlikely event, that some additonal  
configuration of Resin is needed, other than what was already done during 
installation, you can find more information about Resin on its web site at
<a href="http://www.caucho.com/products/resin/">http://www.caucho.com/products/resin/</a>.
</p>

<h3>Mail services</h3>
<p>
Mireka configuration files are located in the <kbd>${mirekaHome}/conf/</kbd> 
directory.
</p>

<p>
<kbd>mireka.xml</kbd> is the primary configuration file of Mireka. 
It is imported by 
<kbd>resin-web.xml</kbd> in the Mireka web application archive during runtime. 
<kbd>mireka.xml</kbd> in turn imports most of the other configuration 
files. 
</p>

<p>
These configuration files will be read and processed by Resin. 
Essentially, they control what objects must be created in runtime. The name of a tag 
is a Java class name. An element assigns a value to a property of the object. 
It is also possible to specify another objest as a property value, either 
defining it inline, or referencing it by an EL expression.    
For more information on the syntax, see the Resin documentation.
</p>

<p>
For more information on the Mireka classes which are referenced in the 
configuration, see the <a href="javadoc/index.html">javadoc</a>.
</p>

<p>
The import structure of configuration files should be considered as an example. 
It is possible to include all data in <kbd>mireka.xml</kbd>. It is also possible 
to divide the configuration into more files than what is supplied by default.  
</p>

<table>
<tr><th>mireka.xml</th><td>Enables/disables MX proxy, submission proxy and 
submission services. It contains a few common elements used by more than one 
services:
<ul>
<li>the default client factory. Specifies the properties of outgoing SMTP 
connections.</li>  
<li>the backend server. It specifies the server, to where mails are relayed for 
delivery or submission. It is used by the relay filter. By default both proxy 
sevices use the same backend server, however this is not required.</li> 
</ul>
</td></tr>
<tr><th><a href="mx.html">mx</a></th><td>Configuration files related to the MX 
service, which receives mails sent to the local domains by any server on the 
internet. The service, in turn, relays all received mails to the backend server.
</td></tr>
<tr><th><a href="submission.html">submission</a></th><td>Configuration files 
related to the Submission service, used by local users to send mails either to 
other local users, or to other domains on the internet. The service directly 
talks to the SMTP server of the recipient domain. The responsible SMTP server
is determined by querying the the MX DNS records of the domain.
If it cannot transmit a mail on the first attempt, then it retries the
transmission several times. If it eventually decides that the mail is 
undeliverable, then it sends a delivery status notification message back to the 
sender.   
</td></tr>
<tr><th><a href="submission-proxy.html">submission-proxy</a></th><td>Configuration 
files related to the Submission Proxy service, used by local users to send mails 
either to other local users, or to other domains on the internet. The service, 
in turn, relays all submitted mails to the backend server.
</td></tr>
</table>

<h3>Logging</h3>
<p>
<kbd>${mirekaHome}/conf/logback.xml</kbd> configures logging.
For more information, see the documentation of 
<a href="http://logback.qos.ch/">Logback</a> and the  
<a href="administration.html">Administration</a> section.
</p>

</body>
</html>